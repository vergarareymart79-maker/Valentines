<style>
    /* ===== VALENTINE PRELOADER ===== */
    .preloader {
        position: fixed;
        inset: 0;
        background: linear-gradient(135deg, #ff758c, #ff7eb3);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: opacity 1s ease, visibility 1s ease;
    }

    .preloader.hidden {
        opacity: 0;
        visibility: hidden;
    }

    .loader-content {
        text-align: center;
        color: white;
        font-family: cursive;
    }

    /* Heart */
    .heart-loader {
        width: 90px;
        height: 90px;
        background: white;
        position: relative;
        transform: rotate(-45deg);
        margin: 0 auto 20px;
        animation: pulse 1.2s infinite ease-in-out;
    }

    .heart-loader::before,
    .heart-loader::after {
        content: "";
        position: absolute;
        width: 90px;
        height: 90px;
        background: white;
        border-radius: 50%;
    }

    .heart-loader::before {
        top: -45px;
        left: 0;
    }

    .heart-loader::after {
        left: 45px;
        top: 0;
    }

    @keyframes pulse {

        0%,
        100% {
            transform: rotate(-45deg) scale(1);
        }

        50% {
            transform: rotate(-45deg) scale(1.2);
        }
    }

    /* Loading text */
    .loading-text {
        font-size: 22px;
        margin-top: 10px;
    }

    /* ===== Gallery Fade In ===== */
    .gallery {
        opacity: 0;
        transform: scale(1.05);
        transition: opacity 1.5s ease, transform 1.5s ease;
    }

    .gallery.reveal {
        opacity: 1;
        transform: scale(1);
    }

    /* ===== PRELOADER ===== */
    .preloader {
        position: fixed;
        inset: 0;
        background: #ff9a9e;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: opacity 0.6s ease, visibility 0.6s ease;
    }

    .preloader.hidden {
        opacity: 0;
        visibility: hidden;
    }

    /* Heart shape */
    .heart-loader {
        width: 80px;
        height: 80px;
        background: #fff;
        position: relative;
        transform: rotate(-45deg);
        animation: pulse 1s infinite ease-in-out;
    }

    .heart-loader::before,
    .heart-loader::after {
        content: "";
        position: absolute;
        width: 80px;
        height: 80px;
        background: #fff;
        border-radius: 50%;
    }

    .heart-loader::before {
        top: -40px;
        left: 0;
    }

    .heart-loader::after {
        left: 40px;
        top: 0;
    }

    @keyframes pulse {

        0%,
        100% {
            transform: rotate(-45deg) scale(1);
        }

        50% {
            transform: rotate(-45deg) scale(1.2);
        }
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    .gallery-track {
        position: fixed;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.25rem;
        padding: 0.25rem;
        will-change: transform;
    }

    .card {
        height: 400px;
        overflow: hidden;

        & .card-image-wrapper {
            height: 135%;
            will-change: transform;

            & img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
        }
    }

    @media (width < 800px) {
        .gallery-track {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (width < 550px) {
        .gallery-track {
            grid-template-columns: repeat(1, 1fr);
        }
    }
</style>
<main class='gallery'>
    <div class='gallery-track'>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1607419726991-5fc7e74cda67?q=80&w=2487&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1601042879364-f3947d3f9c16?q=80&w=2487&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?q=80&w=2272&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1514439827219-9137a0b99245?q=80&w=2487&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1525790935716-36a6c45ad067?q=80&w=2487&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1561344640-2453889cde5b?q=80&w=2467&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1561602009-0ecd1cada8bd?q=80&w=2456&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1560583306-bd304a162229?q=80&w=2340&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1535478044878-3ed83d5456ef?q=80&w=2382&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1610322231968-31322d42851f?q=80&w=2536&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1561344640-2453889cde5b?q=80&w=2467&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1536890992765-f42a1ee1e2a8?q=80&w=2121&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1560583306-bd304a162229?q=80&w=2340&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1573455494060-c5595004fb6c?q=80&w=2280&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1627740660376-bc7506720b8a?q=80&w=2340&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1563964040780-8605906e3eb6?q=80&w=2340&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1592507645647-f2f1d8103c86?q=80&w=2487&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1504805572947-34fad45aed93?q=80&w=2340&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1541591681685-0246308f076b?q=80&w=2489&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1539027994943-7d6960acfaad?q=80&w=2535&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1573501815578-6252ee088c47?q=80&w=2283&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1558273246-57d22047406d?q=80&w=2535&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1534685042784-4c7c97ae40d7?q=80&w=2427&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
        <div class='card'>
            <div class='card-image-wrapper'>
                <img
                    src='https://images.unsplash.com/photo-1627740660376-bc7506720b8a?q=80&w=2340&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
        </div>
    </div>
</main>
<!-- Valentine Preloader -->
<div class="preloader">
    <div class="loader-content">
        <div class="heart-loader"></div>
        <div class="loading-text">
            Loading Love...
            <span id="loadingPercent">0%</span>
        </div>
    </div>
</div>

<!-- Background Music -->
<audio id="bgMusic" loop>
    <source src="your-romantic-music.mp3" type="audio/mpeg">
</audio>

<script>

    window.addEventListener('load', () => {
        const preloader = document.querySelector(".preloader");
        const loadingText = document.getElementById("loadingPercent");
        const gallery = document.querySelector(".gallery");
        const music = document.getElementById("bgMusic");

        const duration = 1000; // duration in milliseconds (3 seconds)
        let startTime = null;

        function updatePercent(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;

            // Calculate percentage
            let percent = Math.min(Math.round((elapsed / duration) * 100), 100);
            loadingText.textContent = percent + "%";

            if (percent < 100) {
                requestAnimationFrame(updatePercent);
            } else {
                // When done, hide preloader and reveal gallery
                preloader.classList.add("hidden");
                gallery.classList.add("reveal");

                // Play background music
                music.volume = 0.4;
                music.play().catch(() => {
                    console.log("Autoplay blocked until user interaction.");
                });

                // Remove preloader after fade-out
                setTimeout(() => preloader.remove(), 1000);
            }
        }

        requestAnimationFrame(updatePercent);
    });




    const gallery = document.querySelector('.gallery');
    const track = document.querySelector('.gallery-track');
    const cards = document.querySelectorAll('.card');
    const easing = 0.05;
    let startY = 0;
    let endY = 0;
    let raf;

    const lerp = (start, end, t) => start * (1 - t) + end * t;

    function updateScroll() {
        startY = lerp(startY, endY, easing);
        gallery.style.height = `${track.clientHeight}px`;
        track.style.transform = `translateY(-${startY}px)`;
        activateParallax();
        raf = requestAnimationFrame(updateScroll);
        if (startY.toFixed(1) === window.scrollY.toFixed(1)) cancelAnimationFrame(raf);
    }

    function startScroll() {
        endY = window.scrollY;
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(updateScroll);
    }

    function parallax(card) {
        const wrapper = card.querySelector('.card-image-wrapper');
        const diff = card.offsetHeight - wrapper.offsetHeight;
        const { top } = card.getBoundingClientRect();
        const progress = top / window.innerHeight;
        const yPos = diff * progress;
        wrapper.style.transform = `translateY(${yPos}px)`;
    }

    const activateParallax = () => cards.forEach(parallax);

    function init() {
        activateParallax();
        startScroll();
    }

    window.addEventListener('load', updateScroll, false);
    window.addEventListener('scroll', init, false);
    window.addEventListener('resize', updateScroll, false);
</script>